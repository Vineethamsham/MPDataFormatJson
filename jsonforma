section_text_raw = section.get("content", "")

# Handle list of strings
if isinstance(section_text_raw, list):
    try:
        section_text = "\n".join(str(x) for x in section_text_raw)
    except Exception as e:
        print(f"⚠️ Error joining content list in section: {e} — content = {section_text_raw}")
        continue

# Handle single string
elif isinstance(section_text_raw, str):
    section_text = section_text_raw

# Catch any weird types (e.g., builtin methods!)
else:
    print(f"⚠️ Unexpected content type: {type(section_text_raw)} — {section_text_raw}")
    continue

if section_text.strip():
    all_texts.append(section_text.strip())
